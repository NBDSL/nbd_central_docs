#########################
Package Installation
#########################

Here we will go through the installation of PELE/AdaptivePELE and
the preparation scripts need it for PELE.


PELE
++++++++++++++++++++++++++

Send an e-mail to daniel.soler@nostrumbiodiscovery.com if you are interested on receiving the commercial software. 
After revision of your application, we will send you a form to fill in with your machine specifications.
Then, you will recieve the PELE (pele.zip) binary containing the licenses to run and a test case to check the installation.

Test PELE installation
``````````````````````````````
.. code-block:: bash

    unzip pele.zip 
    cd PELErev12535/samples/aspirin
    ln -s ../../Data Data
    ln -s ../../Documents Documents
    mpirun -np 3 ../../bin/Pele_mpi control_file --license-directory ../../licenses``

(you may have to set some environment variables by exporting LD_LIBRARY_PATH)


Adaptive-PELE
++++++++++++++++++++++++++

1) ``pip install AdaptivePELE`` (with the right python as it will compile cython extensions) --> numpy and cython need to be installed.

2) go to ``lib/pythonX/site-packages/AdaptivePELE/constants/constants.py`` and manually change this paragraph inside the  constants.py file

.. code-block:: bash

    else:
     PELE_EXECUTABLE = None
     DATA_FOLDER = None
     DOCUMENTS_FOLDER = None

to the path on your machine. (example below)

.. code-block:: bash

    else:
     PELE_EXECUTABLE = "/home/dsoler/PELE/PELE-1.5/bin/PELE-1.5_mpi"
     DATA_FOLDER = "/home/dsoler/PELE/PELE-1.5/Data"
     DOCUMENTS_FOLDER = "/home/dsoler/PELE/PELE-1.5/Documents" 


Test AdaptivePELE installation
``````````````````````````````
.. code-block:: bash

    git clone https://github.com/NostrumBioDiscovery/pele_preparation.git
    cd pele_preparation/test_adaptive
    tar vxf test.tar
    cd test
    manually change the license path inside the file test/pele.conf (line 2) into the /opt/PELE/licenses/  in your machine : "licenseDirectoryPath" : "/home/ywest/", to "licenseDirectoryPath" : "//path/to/PELE/licenses/",
    python -m AdaptivePELE.adaptiveSampling out_in_adaptive.conf


PELE scripts
+++++++++++++++++

.. code-block:: bash

    cd pele_preparation (from before)
    pip install --ignore-installed .


PELE scripts test
``````````````````````````````

.. code-block:: bash

    cd test
    python -m PPP.main -ipdb 1w7h_preparation_structure_2w.pdb
    python -m Helpers.constraints 1w7h_preparation_structure_2w.pdb constraints.conf
    /opt/schrodinger2017-4/utilities/python ../PlopRotTemp/main.py lig.mae

